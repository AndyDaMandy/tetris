<html>

<head>
    <title>Textris</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HDRY5R79EL"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-HDRY5R79EL');
    </script>
</head>

<body>
    <div style="font-family: 'Courier New'" id="render_text"></div>
    <p style="font-family: 'Courier New'"><a href="https://github.com/kevinAlbs/tetris">See Source</a></p>
    <script src="game.js"></script>
    <script src="tests.js"></script>
    <script>
        window.onload = main;

        let copy_debug_info = null;
        function main() {
            const game = game_make({ grid: { use_test_grid: false }, enable_spawn: true, show_ghost_piece: true });
            game.register_event_listeners();
            game.loop({
                render_text_element: document.querySelector("#render_text")
            });
            copy_debug_info = function () {
                console.log();
                const debug_info = game.get_debug_info();
                for (let i = 0; i < debug_info.last_n_renders.length; i++) {
                    debug_info.last_n_renders[i] = debug_info.last_n_renders[i].split("\n");
                }
                copy(JSON.stringify(debug_info, null, "    "));
                console.log("Debug info is copied. Paste into a file. Upload the file to a GitHub issue to report a bug: https://github.com/kevinAlbs/tetris/issues");
            }
        }
        console.log("To report a bug, copy debug info with: `copy_debug_info()`");
    </script>
</body>

</html>